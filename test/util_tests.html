<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ATBattler GameInstance Tests</title>
  <link rel="stylesheet" href="resources/qunit-1.10.0.css">
</head>
<body>
  <div id="qunit"></div>
  <script src="resources/qunit-1.10.0.js"></script>
  <script src="../js/vendor/underscore-min.js"></script>
  <script src="../js/vendor/jquery-1.8.2.min.js"></script>

  <script src="../js/util.js"></script>
  <script>
  test( "EventQueue - basic success cases", function() {
    var numElements = 0;
    function cb(num) {
      numElements = num;
    }
    var eq = new EventQueue(cb);
        
    // is empty
    equal( eq.length(), 0, "Queue is empty" );

    // single push
    eq.push('1');
    equal( eq.length(), 1, "Queue has 1 element" );
    equal( numElements, 1, "Callback reported that 1 element was added" );

    // add a couple more elements
    eq.push('2');
    eq.push('3');
    eq.push('4');
    equal( eq.length(), 4, "Queue now has 4 elements" );

    // single shift, blank arg
    eq.shift();
    equal( eq.length(), 3, "single shift, blank args: Queue now has 3 elements" );
    eq.shift(1);
    equal( eq.length(), 2, "single shift, arg=1: Queue now has 2 elements" );
    var result = eq.shift(2);
    equal( eq.length(), 0, "multi shift, arg=2: Queue now empty" )
    ok( result.length==2 && result[0]=='3' && result[1]=='4', "multi shift result: 2: Queue now empty, and results were ['3','4']" );

  });
  </script>
</body>
</html>
